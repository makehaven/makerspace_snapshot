sql_active: |
  SELECT u.uid AS member_id, 'MEMBER' AS plan_code, 'Member' AS plan_label
  FROM users_field_data u
  JOIN user__roles r ON u.uid = r.entity_id
  WHERE r.roles_target_id = 'member' AND u.status = 1
sql_paused: |
  SELECT u.uid AS member_id, 'MEMBER_PAUSED' AS plan_code, 'Member (Paused)' AS plan_label
  FROM users_field_data u
  JOIN user__roles r ON u.uid = r.entity_id
  WHERE r.roles_target_id = 'member_paused' AND u.status = 1
sql_lapsed: |
  SELECT u.uid AS member_id, 'MEMBER_LAPSED' AS plan_code, 'Member (Lapsed)' AS plan_label
  FROM users_field_data u
  WHERE u.uid NOT IN (SELECT entity_id FROM user__roles WHERE roles_target_id = 'member')
sql_joins: |
  SELECT u.uid AS member_id, 'MEMBER' AS plan_code, 'Member' AS plan_label,
         FROM_UNIXTIME(u.created, '%Y-%m-%d') AS joined_on
  FROM users_field_data u
  JOIN user__roles r ON u.uid = r.entity_id
  WHERE r.roles_target_id = 'member' AND u.created BETWEEN UNIX_TIMESTAMP(:start) AND UNIX_TIMESTAMP(:end)
sql_cancels: |
  SELECT NULL AS member_id, NULL AS plan_code, NULL AS plan_label, NULL AS canceled_on WHERE 1=0
